<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Study Buddy - Enhanced Learning Platform</title>
    <link rel="stylesheet" href="../static/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <!-- Check authentication before loading the page -->
    <script>
        // Check authentication before loading the page
        const token = localStorage.getItem('auth_token');
        const userInfo = localStorage.getItem('user_info');
        if (!token || !userInfo) {
            window.location.href = 'login.html';
        }
    </script>


    <!-- XP Gain Animation Container -->
    <div id="xp-container"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-brand">
            <i class="fas fa-brain"></i>
            <span>AI Study Buddy</span>
        </div>

        <!-- User Welcome Section -->
        <div id="user-welcome" class="user-welcome">
            <div class="welcome-text">
                Welcome, <span id="username-display">Steven</span>!
            </div>
            <div class="user-plan-display">
                Plan: <span id="user-plan-nav" class="plan-badge">Student</span>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" data-section="home">
                <i class="fas fa-home"></i> Home
            </button>
            <button class="nav-tab" data-section="create">
                <i class="fas fa-plus"></i> Create
            </button>
            <button class="nav-tab" data-section="study">
                <i class="fas fa-book"></i> Study
            </button>
            <button class="nav-tab" data-section="groups">
                <i class="fas fa-layer-group"></i> Groups
            </button>
            <button class="nav-tab" data-section="progress">
                <i class="fas fa-chart-line"></i> Progress
            </button>
            <button class="nav-tab" data-section="timetable">
                <i class="fas fa-calendar"></i> Timetable
            </button>
            <button class="nav-tab" data-section="pricing">
                <i class="fas fa-crown"></i> Pricing
            </button>
        </div>
        <div class="nav-actions">
            <button id="logout-btn" class="btn btn-outline">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </nav>

    <!-- Level Progress Bar -->
    <div id="level-progress-container" class="level-progress-container">
        <div class="level-info">
            <span>Level <span id="current-level">1</span></span>
            <span><span id="xp-to-next">100</span> XP to Level <span id="next-level">2</span></span>
        </div>
        <div class="progress-bar">
            <div id="level-progress-fill" class="progress-fill"></div>
        </div>
    </div>

    <!-- User Dashboard -->
    <div id="user-dashboard" class="user-dashboard">
        <div class="dashboard-cards">
            <div class="dashboard-card">
                <div class="card-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <div class="card-content">
                    <div class="card-value" id="user-level">1</div>
                    <div class="card-label">Level</div>
                </div>
            </div>
            <div class="dashboard-card">
                <div class="card-icon">
                    <i class="fas fa-star"></i>
                </div>
                <div class="card-content">
                    <div class="card-value" id="user-xp">0</div>
                    <div class="card-label">XP Points</div>
                </div>
            </div>
            <div class="dashboard-card">
                <div class="card-icon">
                    <i class="fas fa-fire"></i>
                </div>
                <div class="card-content">
                    <div class="card-value" id="current-streak">0</div>
                    <div class="card-label">Day Streak</div>
                </div>
            </div>
            <div class="dashboard-card">
                <div class="card-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <div class="card-content">
                    <div class="card-value" id="total-cards">0</div>
                    <div class="card-label">Total Cards</div>
                </div>
            </div>
            <div class="dashboard-card">
                <div class="card-icon">
                    <i class="fas fa-crown"></i>
                </div>
                <div class="card-content">
                    <div class="card-value" id="user-plan">Free</div>
                    <div class="card-label">Subscription</div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="main-content">
        <!-- Home Section -->
        <div id="home-section" class="content-section active">
            <div class="hero-section">
                <div class="hero-content">
                    <h1>Welcome to AI Study Buddy</h1>
                    <p class="hero-subtitle">Transform your learning experience with AI-powered flashcards and
                        intelligent study sessions</p>
                    <div class="hero-features">
                        <div class="feature-highlight">
                            <i class="fas fa-magic"></i>
                            <span>AI-Generated Flashcards</span>
                        </div>
                        <div class="feature-highlight">
                            <i class="fas fa-chart-line"></i>
                            <span>Progress Tracking</span>
                        </div>
                        <div class="feature-highlight">
                            <i class="fas fa-calendar"></i>
                            <span>Study Scheduling</span>
                        </div>
                    </div>
                    <div class="hero-actions">
                        <button class="btn btn-primary" onclick="switchSection('create')">
                            <i class="fas fa-plus"></i> Create Flashcards
                        </button>
                        <button class="btn btn-secondary" onclick="switchSection('study')">
                            <i class="fas fa-play"></i> Start Studying
                        </button>
                    </div>
                </div>
            </div>

            <div class="features-section">
                <h2>Why Choose AI Study Buddy?</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h3>AI-Powered Generation</h3>
                        <p>Simply input your study notes and let our AI create comprehensive flashcards tailored to your
                            learning style and difficulty preferences.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <h3>Gamified Learning</h3>
                        <p>Earn XP points, level up, and maintain study streaks. Make learning fun and engaging with our
                            built-in reward system.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3>Smart Study Sessions</h3>
                        <p>Adaptive study sessions that track your progress and adjust difficulty based on your
                            performance. Study smarter, not harder.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h3>Time Management</h3>
                        <p>Built-in timetables and todo lists help you organize your study schedule and stay on top of
                            your academic goals.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <h3>Detailed Analytics</h3>
                        <p>Track your learning progress with comprehensive statistics, accuracy rates, and performance
                            insights across subjects.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>Group Organization</h3>
                        <p>Organize your flashcards into logical groups and collections for better study session
                            management and review.</p>
                    </div>
                </div>
            </div>

            <div class="subjects-section">
                <h2>Subjects We Support</h2>
                <div class="subjects-grid">
                    <div class="subject-card">
                        <i class="fas fa-calculator"></i>
                        <span>Mathematics</span>
                    </div>
                    <div class="subject-card">
                        <i class="fas fa-book-open"></i>
                        <span>English</span>
                    </div>
                    <div class="subject-card">
                        <i class="fas fa-flask"></i>
                        <span>Science</span>
                    </div>
                    <div class="subject-card">
                        <i class="fas fa-landmark"></i>
                        <span>History</span>
                    </div>
                    <div class="subject-card">
                        <i class="fas fa-language"></i>
                        <span>Languages</span>
                    </div>
                    <div class="subject-card">
                        <i class="fas fa-ellipsis-h"></i>
                        <span>And More</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Create Section -->
        <div id="create-section" class="content-section">
            <div class="section-header">
                <h2><i class="fas fa-plus"></i> Create Flashcards</h2>
                <p>Generate AI-powered flashcards or create your own</p>
            </div>

            <div class="create-container">
                <div class="input-section">
                    <div class="form-group">
                        <label for="subject-select">Subject</label>
                        <select id="subject-select">
                            <option value="math">Mathematics</option>
                            <option value="english">English</option>
                            <option value="spanish">Spanish</option>
                            <option value="german">German</option>
                            <option value="science">Science</option>
                            <option value="history">History</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="difficulty-select">Difficulty</label>
                        <select id="difficulty-select">
                            <option value="easy">Easy (3 XP)</option>
                            <option value="medium" selected>Medium (5 XP)</option>
                            <option value="hard">Hard (8 XP)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="group-name">Group Name (Optional)</label>
                        <input type="text" id="group-name" placeholder="e.g., Chapter 5 - Algebra">
                    </div>

                    <div class="form-group">
                        <label for="notes-input">Study Notes</label>
                        <textarea id="notes-input" rows="6"
                            placeholder="Enter your study notes here. The AI will generate flashcards based on this content..."></textarea>
                    </div>

                    <div class="button-group">
                        <button id="generate-ai-btn" class="btn btn-primary">
                            <i class="fas fa-magic"></i> Generate with AI
                        </button>
                        <button id="clear-all-btn" class="btn btn-outline">
                            <i class="fas fa-trash"></i> Clear All
                        </button>
                    </div>

                    <!-- Manual Card Creation -->
                    <div class="manual-section">
                        <h3><i class="fas fa-edit"></i> Or Add Manual Card</h3>
                        <div class="form-group">
                            <label for="manual-question">Question</label>
                            <input type="text" id="manual-question" placeholder="Enter your question...">
                        </div>
                        <div class="form-group">
                            <label for="manual-answer">Answer</label>
                            <textarea id="manual-answer" rows="3" placeholder="Enter the answer..."></textarea>
                        </div>
                        <button id="add-manual-btn" class="btn btn-secondary">
                            <i class="fas fa-plus"></i> Add Manual Card
                        </button>
                    </div>
                </div>

                <!-- Preview Section -->
                <div class="preview-section">
                    <h3><i class="fas fa-eye"></i> Preview</h3>
                    <div id="preview-flashcard" class="flashcard">
                        <div class="flashcard-inner">
                            <div class="flashcard-front">
                                <div class="xp-badge">5 XP</div>
                                <div class="difficulty-badge difficulty-medium">Medium</div>
                                <i class="fas fa-question-circle"></i>
                                <p id="preview-question">Click 'Generate with AI' or add a manual question to see
                                    preview</p>
                            </div>
                            <div class="flashcard-back">
                                <div class="xp-badge">5 XP</div>
                                <div class="difficulty-badge difficulty-medium">Medium</div>
                                <i class="fas fa-lightbulb"></i>
                                <p id="preview-answer">Answer will appear here</p>
                            </div>
                        </div>
                    </div>
                    <p class="preview-hint">Click the card to flip it!</p>
                </div>
            </div>

            <!-- Generated Cards -->
            <div id="generated-cards" class="generated-cards hidden">
                <div class="section-header">
                    <h3><i class="fas fa-cards-blank"></i> Generated Flashcards</h3>
                    <div class="card-actions">
                        <button id="save-cards-btn" class="btn btn-success">
                            <i class="fas fa-save"></i> Save All Cards
                        </button>
                    </div>
                </div>
                <div id="cards-container" class="cards-container"></div>
            </div>
        </div>

        <!-- Study Section -->
        <div id="study-section" class="content-section">
            <div class="section-header">
                <h2><i class="fas fa-book"></i> Study Session</h2>
                <p>Review your flashcards and earn XP</p>
            </div>

            <div class="study-container">
                <div class="session-controls">
                    <button id="start-session-btn" class="btn btn-primary">
                        <i class="fas fa-play"></i> Start Session
                    </button>
                    <button id="pause-session-btn" class="btn btn-secondary hidden">
                        <i class="fas fa-pause"></i> Pause
                    </button>
                    <button id="end-session-btn" class="btn btn-danger hidden">
                        <i class="fas fa-stop"></i> End Session
                    </button>
                    <div class="session-timer">
                        <i class="fas fa-clock"></i>
                        <span id="session-timer">00:00</span>
                    </div>
                </div>

                <!-- Study Interface -->
                <div id="review-interface" class="review-interface hidden">
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div id="study-progress-fill" class="progress-fill"></div>
                        </div>
                        <div id="progress-text" class="progress-text">Card 1 of 10</div>
                    </div>

                    <div id="study-flashcard" class="flashcard study-flashcard">
                        <div class="flashcard-inner">
                            <div class="flashcard-front">
                                <div id="study-xp-badge" class="xp-badge">5 XP</div>
                                <div id="study-difficulty-badge" class="difficulty-badge difficulty-medium">Medium
                                </div>
                                <i class="fas fa-question-circle"></i>
                                <p id="study-question">Your question will appear here</p>
                            </div>
                            <div class="flashcard-back">
                                <div id="study-xp-badge-back" class="xp-badge">5 XP</div>
                                <div id="study-difficulty-badge-back" class="difficulty-badge difficulty-medium">
                                    Medium
                                </div>
                                <i class="fas fa-lightbulb"></i>
                                <p id="study-answer">The answer will be revealed here</p>
                            </div>
                        </div>
                    </div>

                    <div class="review-controls">
                        <button id="reveal-answer-btn" class="btn btn-primary">
                            <i class="fas fa-eye"></i> Reveal Answer
                        </button>

                        <div id="answer-controls" class="answer-controls hidden">
                            <p>How did you do?</p>
                            <div class="answer-buttons">
                                <button id="incorrect-btn" class="btn btn-danger">
                                    <i class="fas fa-times"></i> Incorrect
                                </button>
                                <button id="correct-btn" class="btn btn-success">
                                    <i class="fas fa-check"></i> Correct
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Groups Section -->
        <div id="groups-section" class="content-section">
            <div class="section-header">
                <h2><i class="fas fa-layer-group"></i> Flashcard Groups</h2>
                <p>Organize and study your flashcards by groups</p>
            </div>

            <div id="groups-list" class="groups-list">
                <!-- Groups will be populated by JavaScript -->
            </div>
        </div>

        <!-- Progress Section -->
        <div id="progress-section" class="content-section">
            <div class="section-header">
                <h2><i class="fas fa-chart-line"></i> Your Progress</h2>
                <p>Track your learning journey and achievements</p>
            </div>

            <div id="progress-stats" class="progress-stats">
                <!-- Progress stats will be populated by JavaScript -->
            </div>
        </div>

        <!-- Timetable Section -->
        <div id="timetable-section" class="content-section">
            <div class="section-header">
                <h2><i class="fas fa-calendar"></i> Study Management</h2>
                <div class="header-actions">
                    <button id="add-timetable-btn" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Study Time
                    </button>
                    <button id="add-todo-btn" class="btn btn-secondary">
                        <i class="fas fa-tasks"></i> Add Todo
                    </button>
                </div>
            </div>

            <!-- Timetable Form -->
            <div id="timetable-form" class="form-card hidden">
                <h3>Add Study Time</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="timetable-subject">Subject</label>
                        <select id="timetable-subject" class="form-control">
                            <option value="math">Mathematics</option>
                            <option value="english">English</option>
                            <option value="spanish">Spanish</option>
                            <option value="german">German</option>
                            <option value="science">Science</option>
                            <option value="history">History</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="timetable-day">Day</label>
                        <select id="timetable-day" class="form-control">
                            <option value="Monday">Monday</option>
                            <option value="Tuesday">Tuesday</option>
                            <option value="Wednesday">Wednesday</option>
                            <option value="Thursday">Thursday</option>
                            <option value="Friday">Friday</option>
                            <option value="Saturday">Saturday</option>
                            <option value="Sunday">Sunday</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="timetable-start">Start Time</label>
                        <input type="time" id="timetable-start" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="timetable-end">End Time</label>
                        <input type="time" id="timetable-end" class="form-control">
                    </div>
                </div>
                <div class="form-actions">
                    <button id="save-timetable-btn" class="btn btn-primary">Save</button>
                    <button id="cancel-timetable-btn" class="btn btn-secondary">Cancel</button>
                </div>
            </div>

            <!-- Todo Form -->
            <div id="todo-form" class="form-card hidden">
                <h3>Add Todo Item</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="todo-title">Task Title</label>
                        <input type="text" id="todo-title" class="form-control"
                            placeholder="e.g., Complete Chapter 5 exercises">
                    </div>
                    <div class="form-group">
                        <label for="todo-date">Due Date</label>
                        <input type="date" id="todo-date" class="form-control">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="todo-priority">Priority</label>
                        <select id="todo-priority" class="form-control">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="todo-subject">Related Subject</label>
                        <select id="todo-subject" class="form-control">
                            <option value="math">Mathematics</option>
                            <option value="english">English</option>
                            <option value="spanish">Spanish</option>
                            <option value="german">German</option>
                            <option value="science">Science</option>
                            <option value="history">History</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="todo-description">Description (Optional)</label>
                    <textarea id="todo-description" class="form-control" rows="3"
                        placeholder="Additional details about the task"></textarea>
                </div>
                <div class="form-actions">
                    <button id="save-todo-btn" class="btn btn-primary">Save Todo</button>
                    <button id="cancel-todo-btn" class="btn btn-secondary">Cancel</button>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="timetable-main-content">
                <!-- Compact Weekly Timetable -->
                <div class="timetable-container">
                    <h3><i class="fas fa-calendar-week"></i> Weekly Schedule</h3>
                    <div id="timetable-display" class="compact-timetable"></div>
                </div>

                <!-- Todo List Section -->
                <div class="todo-container">
                    <h3><i class="fas fa-tasks"></i> Tasks & Todos</h3>

                    <!-- Date Filter -->
                    <div class="todo-filters">
                        <select id="todo-date-filter" class="form-control">
                            <option value="all">All Tasks</option>
                            <option value="today">Today</option>
                            <option value="tomorrow">Tomorrow</option>
                            <option value="this-week">This Week</option>
                            <option value="overdue">Overdue</option>
                        </select>
                        <select id="todo-subject-filter" class="form-control">
                            <option value="all">All Subjects</option>
                            <option value="math">Mathematics</option>
                            <option value="english">English</option>
                            <option value="spanish">Spanish</option>
                            <option value="german">German</option>
                            <option value="science">Science</option>
                            <option value="history">History</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <!-- Todo List Display -->
                    <div id="todo-list" class="todo-list"></div>
                </div>
            </div>
        </div>

        <!-- Pricing Section -->
        <section id="pricing-section" class="content-section">
            <div class="section-header">
                <h2><i class="fas fa-crown"></i> Choose Your Plan</h2>
                <p>Select the perfect plan for your learning journey</p>
            </div>

            <div class="pricing-cards">
                <!-- Free Plan -->
                <div class="pricing-card">
                    <h3>Free Plan</h3>
                    <div class="price">$0<span>/month</span></div>
                    <ul>
                        <li><i class="fas fa-check"></i> 20 flashcards per month</li>
                        <li><i class="fas fa-check"></i> Basic subjects</li>
                        <li><i class="fas fa-check"></i> Limited AI features</li>
                        <li><i class="fas fa-times"></i> No progress saving</li>
                        <li><i class="fas fa-times"></i> No group organization</li>
                    </ul>
                    <button class="btn btn-outline" disabled>Current Plan</button>
                </div>

                <!-- Student Plan -->
                <div class="pricing-card featured">
                    <div class="popular-badge">MOST POPULAR</div>
                    <h3>Student Plan</h3>
                    <div class="price">$4.99<span>/month</span></div>
                    <ul>
                        <li><i class="fas fa-check"></i> Unlimited flashcards</li>
                        <li><i class="fas fa-check"></i> All subjects supported</li>
                        <li><i class="fas fa-check"></i> Full AI features</li>
                        <li><i class="fas fa-check"></i> Progress tracking</li>
                        <li><i class="fas fa-check"></i> Group organization</li>
                        <li><i class="fas fa-check"></i> Study analytics</li>
                    </ul>
                    <button id="student-plan-btn" class="btn btn-primary">Upgrade Now</button>
                </div>

                <!-- Educator Plan -->
                <div class="pricing-card">
                    <h3>Educator Plan</h3>
                    <div class="price">$9.99<span>/month</span></div>
                    <ul>
                        <li><i class="fas fa-check"></i> Everything in Student Plan</li>
                        <li><i class="fas fa-check"></i> Create class groups</li>
                        <li><i class="fas fa-check"></i> Share flashcards</li>
                        <li><i class="fas fa-check"></i> Student progress tracking</li>
                        <li><i class="fas fa-check"></i> Bulk card creation</li>
                        <li><i class="fas fa-check"></i> Priority support</li>
                    </ul>
                    <button id="educator-plan-btn" class="btn btn-secondary">Choose Plan</button>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-brand">
                        <i class="fas fa-brain"></i>
                        <span>AI Study Buddy</span>
                    </div>
                    <p>Empowering learners worldwide with AI-driven study tools and personalized learning
                        experiences.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>

                <div class="footer-links">
                    <div class="link-column">
                        <h4>Product</h4>
                        <a href="#" onclick="switchSection('home')">Home</a>
                        <a href="#" onclick="switchSection('pricing')">Pricing</a>
                        <a href="#">Features</a>
                        <a href="#">API</a>
                    </div>
                    <div class="link-column">
                        <h4>Support</h4>
                        <a href="#">Help Center</a>
                        <a href="#">Contact Us</a>
                        <a href="#">Bug Reports</a>
                        <a href="#">Feature Requests</a>
                    </div>
                    <div class="link-column">
                        <h4>Company</h4>
                        <a href="#">About Us</a>
                        <a href="#">Careers</a>
                        <a href="#">Blog</a>
                        <a href="#">Press</a>
                    </div>
                    <div class="link-column">
                        <h4>Legal</h4>
                        <a href="#">Privacy Policy</a>
                        <a href="#">Terms of Service</a>
                        <a href="#">Cookie Policy</a>
                        <a href="#">GDPR</a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2024 AI Study Buddy. All rights reserved.</p>
                <div class="footer-bottom-links">
                    <a href="#">Privacy</a>
                    <a href="#">Terms</a>
                    <a href="#">Sitemap</a>
                </div>
            </div>
        </footer>

        <!-- Connection Status -->
        <div id="connection-status" class="connection-status">
            <span id="status-text">Connected</span>
            <span id="status-indicator" class="status-indicator"></span>
        </div>
    </div>

    <script src="../static/main.js"></script>
</body>

</html>